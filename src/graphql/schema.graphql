#### Query ####
type Query {

  #  유저
  getAllUser: [User]
  getUserById(id: Int!): User
  existCafeNameInUser(id:Int! cafe_name: String!): User

  #  카페
  getAllCafe: [Cafe]
  getCafeByName(cafe_name: String!): Cafe

  #  리뷰
  getReviewByKey(key: String!): Review

  #  마일리지
  getMileageLogByClientId(client_id: Int!): [MileageLog]
}

#### Mutation ####
type Mutation {

  #  유저
  getKakaoUserByJwt(jwt: String!): User
  authUser: User
  saveCardToUser(id: Int!, cafe_name: String!, code: String! card_img: String!): User

  saveMileage(cafe_name:String!, menu_name: String!, price: Int!, mileage: Int!, staff_id: Int!, client_id: Int!): MileageLog
}

### 유저 ###
type User {
  id: Int!,
  name: String!,
  email: String!,
  auth: String!,
  point: Int!,
  rating: String!,
  cafe_list: [QR],
  average_star: Float,
}

# 유저 하위 데이터 (소지한 카드 정보) #
type QR {
  cafe_name: String!,
  code: String!,
  card_img: String!,
  visit_times: Int,
}



### 카페 ###
type Cafe {
  cafe_id: Int!,
  owner_id: Int!,
  cafe_info: CafeInfo!,
  discount_rate: CafeDiscountRate!,
  point_fluc: Int!,
  # staff항목 추가 // 현재 직원, 승인 대기중인 직원 등록 (21-8-31추가:유성현)
  curr_staff: [Staff_data],
  enroll_staff: [Staff_data],
}

# 카페 하위 데이터 (카페 정보) #
type CafeInfo {
  cafe_name: String!,
  beans: String,
  position: String!,
  address: String!,
  phone: String!,
  card_img: String!,
  # 카페 정보에 사용될 카페 이미지 (owner가 직접 등록하는 사진 21-8-31추가:유성현)
  cafe_img: [String],
  like: Int!,
}

# 카페 하위 데이터 (등급별 할인율) #
type CafeDiscountRate {
  silver: Int!,
  gold: Int!,
  vip: Int!,
}

# 카페 하위 데이터 (직원 정보) #  (21-8-31추가:유성현)
type Staff_data {
  staff_name: String!,
  staff_gender: String!,
  staff_id: Int!,
  staff_cafe_id: Int!,
}




### 리뷰 ###
type Review {
  key: String,
  user_name: String!,
  content: String,
  location: String!,
  star: Star!,
  image_list: [String]!,
  like_count: Int,
  comment_list: [Comment],
  hash_tag_list: String,
  liker_list: [String],
  post_date: String,
}

# 리뷰 하위 데이터 (평점) #
type Star {
  flavor: Float!,
  atmosphere: Float!,
  price: Float!,
}

# 리뷰 하위 데이터 (댓글) #
type Comment {
  user_name: String,
  content: String,
  post_date: String,
}

### 마일리지 로그 ###
type MileageLog {
  date: String!,
  staff_id: Int!,
  client_id: Int!,
  cafe_name: String!,
  menu_name: String!,
  price: Int!,
  mileage: Int!,
  review: String,
  visit_times: Int,
}
